/* eslint-disable @typescript-eslint/no-explicit-any */
/** Copyright 2019 Amazon.com, Inc. or its affiliates. All Rights Reserved. */
"use strict";
/**
 * The runtime has a single beforeExit function which is stored in the global
 * object with a symbol key.
 * The symbol is not exported.
 * The process.beforeExit listener is setup in index.js along with all other
 * top-level process event listeners.
 */
// define a named symbol for the handler function
const LISTENER_SYMBOL = Symbol.for("aws.lambda.beforeExit");
const NO_OP_LISTENER = () => {
    /* NoOp */
};
// export a setter
class BeforeExitListener {
    constructor() {
        /**
         * Call the listener function with no arguments.
         */
        this.invoke = () => global[LISTENER_SYMBOL]();
        /**
         * Reset the listener to a no-op function.
         */
        this.reset = () => (global[LISTENER_SYMBOL] = NO_OP_LISTENER);
        /**
         * Set the listener to the provided function.
         */
        this.set = (listener) => (global[LISTENER_SYMBOL] = listener);
        this.reset();
    }
}
const beforeExitListener = new BeforeExitListener();
export default beforeExitListener;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmVmb3JlRXhpdExpc3RlbmVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL1J1bnRpbWUvQmVmb3JlRXhpdExpc3RlbmVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLHVEQUF1RDtBQUN2RCw4RUFBOEU7QUFFOUUsWUFBWSxDQUFDO0FBSWI7Ozs7OztHQU1HO0FBRUgsaURBQWlEO0FBQ2pELE1BQU0sZUFBZSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsdUJBQXVCLENBQUMsQ0FBQztBQUU1RCxNQUFNLGNBQWMsR0FBRyxHQUFHLEVBQUU7SUFDMUIsVUFBVTtBQUNaLENBQUMsQ0FBQztBQUVGLGtCQUFrQjtBQUNsQixNQUFNLGtCQUFrQjtJQUN0QjtRQUlBOztXQUVHO1FBQ0gsV0FBTSxHQUFHLEdBQVMsRUFBRSxDQUFFLE1BQWMsQ0FBQyxlQUFlLENBQUMsRUFBRSxDQUFDO1FBRXhEOztXQUVHO1FBQ0gsVUFBSyxHQUFHLEdBQWlCLEVBQUUsQ0FDekIsQ0FBRSxNQUFjLENBQUMsZUFBZSxDQUFDLEdBQUcsY0FBYyxDQUFDLENBQUM7UUFFdEQ7O1dBRUc7UUFDSCxRQUFHLEdBQUcsQ0FBQyxRQUFvQixFQUFnQixFQUFFLENBQzNDLENBQUUsTUFBYyxDQUFDLGVBQWUsQ0FBQyxHQUFHLFFBQVEsQ0FBQyxDQUFDO1FBbEI5QyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7SUFDZixDQUFDO0NBa0JGO0FBRUQsTUFBTSxrQkFBa0IsR0FBRyxJQUFJLGtCQUFrQixFQUFFLENBQUM7QUFFcEQsZUFBZSxrQkFBa0IsQ0FBQyJ9